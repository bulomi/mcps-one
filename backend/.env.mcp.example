# MCPS.ONE MCP 服务端环境变量配置示例
# 复制此文件为 .env 并根据需要修改配置

# =============================================================================
# 应用基础配置
# =============================================================================
APP_NAME="MCP 工具管理系统"
VERSION="1.0.0"
DEBUG=true

# =============================================================================
# 数据库配置
# =============================================================================
DATABASE_URL="sqlite:///./data/mcps.db"
DB_ECHO=false

# =============================================================================
# MCP 服务端核心配置
# =============================================================================
# 是否启用MCP服务端
ENABLE_MCP_SERVER=true

# 传输协议: stdio, http
MCP_SERVER_TRANSPORT="http"

# HTTP模式配置
MCP_SERVER_HOST="127.0.0.1"
MCP_SERVER_PORT=8001

# 日志配置
MCP_SERVER_LOG_LEVEL="INFO"
MCP_SERVER_SHOW_BANNER=true

# HTTP服务配置
MCP_SERVER_STATELESS_HTTP=false

# =============================================================================
# MCP 服务端高级配置
# =============================================================================
# 连接和超时配置
MCP_MAX_CONNECTIONS=10
MCP_CONNECTION_TIMEOUT=30
MCP_TOOL_STARTUP_TIMEOUT=60

# 服务管理配置
MCP_SERVICE_MODE="both"  # proxy, server, both, disabled
MCP_AUTO_START=true
MCP_GRACEFUL_SHUTDOWN=true

# 重试和健康检查
MCP_HEALTH_CHECK_INTERVAL=30
MCP_RETRY_COUNT=3

# =============================================================================
# 健康检查和监控配置
# =============================================================================
# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT="/health"
HEALTH_CHECK_TIMEOUT=5

# 指标收集
METRICS_ENABLED=true
METRICS_ENDPOINT="/metrics"
PROMETHEUS_ENABLED=false

# MCP指标
MCP_ENABLE_METRICS=true

# =============================================================================
# 安全配置
# =============================================================================
SECRET_KEY="your-secret-key-change-in-production"
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL="INFO"
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
# LOG_FILE="./data/logs/mcps.log"

# =============================================================================
# 服务器配置
# =============================================================================
HOST="0.0.0.0"
PORT=8000
ALLOWED_HOSTS=["*"]

# =============================================================================
# WebSocket 配置
# =============================================================================
WS_HEARTBEAT_INTERVAL=30

# =============================================================================
# 数据目录配置
# =============================================================================
DATA_DIR="./data"
TOOLS_DIR="./data/tools"
LOGS_DIR="./data/logs"

# =============================================================================
# MCP 进程管理配置
# =============================================================================
MCP_MAX_PROCESSES=10
MCP_PROCESS_TIMEOUT=30
MCP_RESTART_DELAY=5

# =============================================================================
# 开发和调试配置
# =============================================================================
# 设置为 true 以启用详细的调试日志
# DEBUG_MCP_PROTOCOL=false
# DEBUG_TOOL_COMMUNICATION=false
# DEBUG_HTTP_REQUESTS=false

# =============================================================================
# 生产环境配置建议
# =============================================================================
# 生产环境中建议的配置:
# DEBUG=false
# LOG_LEVEL="WARNING"
# MCP_SERVER_LOG_LEVEL="WARNING"
# SECRET_KEY="生成一个强密钥"
# DATABASE_URL="postgresql://user:pass@localhost/mcps"
# PROMETHEUS_ENABLED=true